

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cookbook package &mdash; Cookbook 2.2.21 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.2.21',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Cookbook 2.2.21 documentation" href="index.html" />
    <link rel="prev" title="Cookbook" href="index.html" />
	<script type="text/javascript">
	
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-31431678-1']);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	
	</script>
	 

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Cookbook"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Cookbook 2.2.21 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-cookbook">
<span id="cookbook-package"></span><h1>Cookbook package<a class="headerlink" href="#module-cookbook" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cookbook">
<h2>Cookbook<a class="headerlink" href="#cookbook" title="Permalink to this headline">¶</a></h2>
<div class="section" id="some-python-recipes-from-the-python-cookbook">
<h3>Some python recipes from the python cookbook<a class="headerlink" href="#some-python-recipes-from-the-python-cookbook" title="Permalink to this headline">¶</a></h3>
<div class="section" id="introduction">
<h4>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<p>This python package implements some recipes from the python cookbook. Some of the recipes are copied
verbatim from the python <a class="reference external" href="http://code.activestate.com/recipes/langs/python/">cookbook</a> and some are modified versions of those at the cookbook. Others I
(John Reid) have written from scratch.</p>
</div>
<div class="section" id="license">
<h4>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h4>
<p>All novel parts of this software are released under the BSD. See the accompanying file python/cookbook/LICENSE.
Please also refer to original code for their licensing terms.</p>
</div>
<div class="section" id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>I have tested this software on python 2.6 and 2.7.</p>
</div>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>The standard python package install method should work:</p>
<div class="highlight-python"><pre>python setup.py build
python setup.py install</pre>
</div>
<dl class="function">
<dt id="cookbook.version_string">
<tt class="descclassname">cookbook.</tt><tt class="descname">version_string</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.version_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the release and svn revision as a string.</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-cookbook.bidirectional_map">
<span id="bidirectional-map"></span><h2>Bidirectional map<a class="headerlink" href="#module-cookbook.bidirectional_map" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cookbook.bidirectional_map.BidirectionalMap">
<em class="property">class </em><tt class="descclassname">cookbook.bidirectional_map.</tt><tt class="descname">BidirectionalMap</tt><a class="headerlink" href="#cookbook.bidirectional_map.BidirectionalMap" title="Permalink to this definition">¶</a></dt>
<dd><p>A bidirectional map that maintains 2 dicts, one to map each way between elements of type 1 and type 2.</p>
<p>The map is built by adding pairs of elements that are related.</p>
<dl class="method">
<dt id="cookbook.bidirectional_map.BidirectionalMap.add">
<tt class="descname">add</tt><big>(</big><em>v1</em>, <em>v2</em><big>)</big><a class="headerlink" href="#cookbook.bidirectional_map.BidirectionalMap.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a relationship between v1 of type 1 and v2 of type 2.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.bidirectional_map.BidirectionalMap.discard">
<tt class="descname">discard</tt><big>(</big><em>v1</em>, <em>v2</em><big>)</big><a class="headerlink" href="#cookbook.bidirectional_map.BidirectionalMap.discard" title="Permalink to this definition">¶</a></dt>
<dd><p>Removed a relationship between v1 of type 1 and v2 of type 2.</p>
<p>Will do nothing if relationship is not in map.</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.bidirectional_map.BidirectionalMap.map1">
<tt class="descname">map1</tt><em class="property"> = None</em><a class="headerlink" href="#cookbook.bidirectional_map.BidirectionalMap.map1" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps from keys of type 1 to values of type 2.</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.bidirectional_map.BidirectionalMap.map2">
<tt class="descname">map2</tt><em class="property"> = None</em><a class="headerlink" href="#cookbook.bidirectional_map.BidirectionalMap.map2" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps from keys of type 2 to values of type 1.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.bidirectional_map.BidirectionalMap.remove">
<tt class="descname">remove</tt><big>(</big><em>v1</em>, <em>v2</em><big>)</big><a class="headerlink" href="#cookbook.bidirectional_map.BidirectionalMap.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removed a relationship between v1 of type 1 and v2 of type 2.</p>
<p>Will throw key error if relationship is not in map.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cookbook.bunch">
<span id="bunch"></span><h2>Bunch<a class="headerlink" href="#module-cookbook.bunch" title="Permalink to this headline">¶</a></h2>
<p>From: <a class="reference external" href="http://code.activestate.com/recipes/52308-the-simple-but-handy-collector-of-a-bunch-of-named/">http://code.activestate.com/recipes/52308-the-simple-but-handy-collector-of-a-bunch-of-named/</a>
(released under PSF license).</p>
<dl class="class">
<dt id="cookbook.bunch.Bunch">
<em class="property">class </em><tt class="descclassname">cookbook.bunch.</tt><tt class="descname">Bunch</tt><big>(</big><em>**kwds</em><big>)</big><a class="headerlink" href="#cookbook.bunch.Bunch" title="Permalink to this definition">¶</a></dt>
<dd><p>Often we want to just collect a bunch of stuff together, naming each item of the bunch; 
a dictionary&#8217;s OK for that, but a small do-nothing class is even handier, and prettier to use.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.cache_decorator">
<span id="cache-decorator"></span><h2>Cache decorator<a class="headerlink" href="#module-cookbook.cache_decorator" title="Permalink to this headline">¶</a></h2>
<p>Adapted from: <a class="reference external" href="http://code.activestate.com/recipes/325205-cache-decorator-in-python-24/">http://code.activestate.com/recipes/325205-cache-decorator-in-python-24/</a>
(released under PSF license).</p>
<p>The latest version of Python introduced a new language feature, function and method decorators
(PEP 318, <a class="reference external" href="http://www.python.org/peps/pep-0318.html">http://www.python.org/peps/pep-0318.html</a>). This recipe show a common callable transformation
that can benefit from the new syntax, often referred to as Memoization pattern.</p>
<p>Memoization is a useful pattern for improving the amortized performance of a computationally expensive
function or method. The new syntax allows making explicit that a callable is memoized.</p>
<p>A restriction of the recipe above is that the arguments of the function (and also the method receiver
object for methods) have to be hashable.</p>
<p>The decorator can be generalized by allowing different caching policies (e.g. a FIFO cache or a cache
implementing an LRU policy) apart from the implied &#8220;cache-forever&#8221; policy of a dict.</p>
<dl class="class">
<dt id="cookbook.cache_decorator.ImmutableDict">
<em class="property">class </em><tt class="descclassname">cookbook.cache_decorator.</tt><tt class="descname">ImmutableDict</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#cookbook.cache_decorator.ImmutableDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A hashable dict.</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.cache_decorator.PickledMemoize">
<em class="property">class </em><tt class="descclassname">cookbook.cache_decorator.</tt><tt class="descname">PickledMemoize</tt><big>(</big><em>function</em>, <em>pickle_file</em>, <em>dump_on_update=True</em><big>)</big><a class="headerlink" href="#cookbook.cache_decorator.PickledMemoize" title="Permalink to this definition">¶</a></dt>
<dd><p>Like Memoize but pickles its cache/memo for use in next python session</p>
<dl class="method">
<dt id="cookbook.cache_decorator.PickledMemoize.dump_cache">
<tt class="descname">dump_cache</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.cache_decorator.PickledMemoize.dump_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the memo to the cache.</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.cache_decorator.PickledMemoize.file">
<tt class="descname">file</tt><a class="headerlink" href="#cookbook.cache_decorator.PickledMemoize.file" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The file we pickle to and from.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.cache_decorator.PickledMemoize.load_cache">
<tt class="descname">load_cache</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.cache_decorator.PickledMemoize.load_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the memo from the cache.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cookbook.cache_decorator.pickled_method">
<em class="property">class </em><tt class="descclassname">cookbook.cache_decorator.</tt><tt class="descname">pickled_method</tt><big>(</big><em>file</em>, <em>name</em><big>)</big><a class="headerlink" href="#cookbook.cache_decorator.pickled_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Pickles the result of the method (ignoring arguments) and uses this if possible on the next call.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.console">
<span id="console"></span><h2>Console<a class="headerlink" href="#module-cookbook.console" title="Permalink to this headline">¶</a></h2>
<p>Get console terminal size if possible.</p>
<p>From: <a class="reference external" href="http://stackoverflow.com/questions/566746/how-to-get-console-window-width-in-python">http://stackoverflow.com/questions/566746/how-to-get-console-window-width-in-python</a></p>
<dl class="function">
<dt id="cookbook.console.getTerminalSize">
<tt class="descclassname">cookbook.console.</tt><tt class="descname">getTerminalSize</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.console.getTerminalSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Get console terminal size if possible.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.const">
<span id="const"></span><h2>Const<a class="headerlink" href="#module-cookbook.const" title="Permalink to this headline">¶</a></h2>
<p>In Python, any variable can be re-bound at will &#8211; and modules don&#8217;t 
let you define special methods such as an instance&#8217;s __setattr__ 
to stop attribute re-binding. Easy solution (in Python 2.1 and up): 
use an instance as &#8216;module&#8217;...</p>
<p>Adapted from <a class="reference external" href="http://code.activestate.com/recipes/65207-constants-in-python/">http://code.activestate.com/recipes/65207-constants-in-python/</a>
(released under PSF license).</p>
</div>
<div class="section" id="module-cookbook.decorate">
<span id="decorate"></span><h2>Decorate<a class="headerlink" href="#module-cookbook.decorate" title="Permalink to this headline">¶</a></h2>
<p>Decorator helpers.</p>
<dl class="attribute">
<dt id="cookbook.decorate.DecorateInstanceMethod">
<tt class="descclassname">cookbook.decorate.</tt><tt class="descname">DecorateInstanceMethod</tt><a class="headerlink" href="#cookbook.decorate.DecorateInstanceMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that allows other decorators to decorate instance methods.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.decorate.simple_decorator">
<tt class="descclassname">cookbook.decorate.</tt><tt class="descname">simple_decorator</tt><big>(</big><em>decorator</em><big>)</big><a class="headerlink" href="#cookbook.decorate.simple_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator can be used to turn simple functions
into well-behaved decorators, so long as the decorators
are fairly simple. If a decorator expects a function and
returns a function (no descriptors), and if it doesn&#8217;t
modify function attributes or docstring, then it is
eligible to use this. Simply apply &#64;simple_decorator to
your decorator and it will automatically preserve the
docstring and function attributes of functions to which
it is applied.</p>
<p>From <a class="reference external" href="http://wiki.python.org/moin/PythonDecoratorLibrary">http://wiki.python.org/moin/PythonDecoratorLibrary</a></p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.dicts">
<span id="dicts"></span><h2>Dicts<a class="headerlink" href="#module-cookbook.dicts" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cookbook.dicts.ChoiceDict">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">ChoiceDict</tt><big>(</big><em>values</em>, <em>cycle=False</em><big>)</big><a class="headerlink" href="#cookbook.dicts.ChoiceDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary that assigns one value in a sequence of values to each key. Can be useful for assigning colours/line styles in
plots for example.</p>
<dl class="attribute">
<dt id="cookbook.dicts.ChoiceDict.it">
<tt class="descname">it</tt><em class="property"> = None</em><a class="headerlink" href="#cookbook.dicts.ChoiceDict.it" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over values.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cookbook.dicts.DictOf">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">DictOf</tt><big>(</big><em>missing_value_creator</em>, <em>take_key_as_arg=False</em><big>)</big><a class="headerlink" href="#cookbook.dicts.DictOf" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary where missing values are created by an __init__ time supplied function.</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.dicts.DictOfDicts">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">DictOfDicts</tt><a class="headerlink" href="#cookbook.dicts.DictOfDicts" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary where the values are dictionarys. If an accessed key is missing,
the value is initialised to an empty dict</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.dicts.DictOfInts">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">DictOfInts</tt><a class="headerlink" href="#cookbook.dicts.DictOfInts" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary where the values are ints. If an accessed key is missing,
the value is initialised to 0. Useful for counting</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.dicts.DictOfLists">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">DictOfLists</tt><a class="headerlink" href="#cookbook.dicts.DictOfLists" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary where the values are lists. If an accessed key is missing,
the value is initialised to an empty list</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.dicts.DictOfSets">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">DictOfSets</tt><a class="headerlink" href="#cookbook.dicts.DictOfSets" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary where the values are sets. If an accessed key is missing,
the value is initialised to an empty set</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.dicts.UniqueIds">
<em class="property">class </em><tt class="descclassname">cookbook.dicts.</tt><tt class="descname">UniqueIds</tt><a class="headerlink" href="#cookbook.dicts.UniqueIds" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds a unique integer id for each key that is accessed.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.dicts.dict_of">
<tt class="descclassname">cookbook.dicts.</tt><tt class="descname">dict_of</tt><big>(</big><em>missing_value_creator</em>, <em>take_key_as_arg=False</em><big>)</big><a class="headerlink" href="#cookbook.dicts.dict_of" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A function that creates DictOf using these args.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.enum">
<span id="enum"></span><h2>Enum<a class="headerlink" href="#module-cookbook.enum" title="Permalink to this headline">¶</a></h2>
<p>Taken from <a class="reference external" href="http://code.activestate.com/recipes/413486-first-class-enums-in-python/">http://code.activestate.com/recipes/413486-first-class-enums-in-python/</a>
(released under PSF license)</p>
</div>
<div class="section" id="module-cookbook.equivalence">
<span id="equivalence"></span><h2>Equivalence<a class="headerlink" href="#module-cookbook.equivalence" title="Permalink to this headline">¶</a></h2>
<p>From <a class="reference external" href="http://code.activestate.com/recipes/499354-equivalence-partition/">http://code.activestate.com/recipes/499354-equivalence-partition/</a></p>
<dl class="function">
<dt id="cookbook.equivalence.check_equivalence_partition">
<tt class="descclassname">cookbook.equivalence.</tt><tt class="descname">check_equivalence_partition</tt><big>(</big><em>classes</em>, <em>partitions</em>, <em>relation</em><big>)</big><a class="headerlink" href="#cookbook.equivalence.check_equivalence_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that a partition is consistent under the relationship</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.equivalence.equivalence_enumeration">
<tt class="descclassname">cookbook.equivalence.</tt><tt class="descname">equivalence_enumeration</tt><big>(</big><em>iterable</em>, <em>relation</em><big>)</big><a class="headerlink" href="#cookbook.equivalence.equivalence_enumeration" title="Permalink to this definition">¶</a></dt>
<dd><p>Partitions a set of objects into equivalence classes</p>
<p>Same as equivalence_partition() but also numbers the classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>iterable</strong> &#8211; collection of objects to be partitioned</li>
<li><strong>relation</strong> &#8211; equivalence relation. I.e. relation(o1,o2) evaluates to True
if and only if o1 and o2 are equivalent</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(classes, partitions, ids)
classes is a sequence of sets. Each one is an equivalence class
partitions is a dictionary mapping objects to equivalence classes
ids is a dictionary mapping objects to the indices of their equivalence classes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cookbook.equivalence.equivalence_partition">
<tt class="descclassname">cookbook.equivalence.</tt><tt class="descname">equivalence_partition</tt><big>(</big><em>iterable</em>, <em>relation</em><big>)</big><a class="headerlink" href="#cookbook.equivalence.equivalence_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Partitions a set of objects into equivalence classes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>iterable</strong> &#8211; collection of objects to be partitioned</li>
<li><strong>relation</strong> &#8211; equivalence relation. I.e. relation(o1,o2) evaluates to True
if and only if o1 and o2 are equivalent</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(classes, partitions)
classes is a sequence of sets. Each one is an equivalence class.
partitions is a dictionary mapping objects to equivalence classes.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cookbook.function_as_task">
<span id="function-as-task"></span><h2>Function as task<a class="headerlink" href="#module-cookbook.function_as_task" title="Permalink to this headline">¶</a></h2>
<p>Code to run a function as a task. Useful to make sequential code parallel.</p>
<p>Uses pickling to pass arguments and get result back.</p>
<dl class="exception">
<dt id="cookbook.function_as_task.CalledProcessError">
<em class="property">exception </em><tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">CalledProcessError</tt><big>(</big><em>returncode</em>, <em>cmd</em>, <em>output=None</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.CalledProcessError" title="Permalink to this definition">¶</a></dt>
<dd><p>This exception is raised when a process run by check_call() or
check_output() returns a non-zero exit status.
The exit status will be stored in the returncode attribute;
check_output() will also store the output in the output attribute.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.check_output">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">check_output</tt><big>(</big><em>*popenargs</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.check_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Run command with arguments and return its output as a byte string.</p>
<p>If the exit code was non-zero it raises a CalledProcessError.  The
CalledProcessError object will have the return code in the returncode
attribute and output in the output attribute.</p>
<p>The arguments are the same as for the Popen constructor.  Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">check_output</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span> <span class="s">&quot;-l&quot;</span><span class="p">,</span> <span class="s">&quot;/dev/null&quot;</span><span class="p">])</span>
<span class="go">&#39;crw-rw-rw- 1 root root 1, 3 Oct 18  2007 /dev/null\n&#39;</span>
</pre></div>
</div>
<p>The stdout argument is not allowed as it is used internally.
To capture standard error in the result, use stderr=STDOUT.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">check_output</span><span class="p">([</span><span class="s">&quot;/bin/sh&quot;</span><span class="p">,</span> <span class="s">&quot;-c&quot;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s">&quot;ls -l non_existent_file ; exit 0&quot;</span><span class="p">],</span>
<span class="gp">... </span>             <span class="n">stderr</span><span class="o">=</span><span class="n">STDOUT</span><span class="p">)</span>
<span class="go">&#39;ls: non_existent_file: No such file or directory\n&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.create_queue">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">create_queue</tt><big>(</big><em>num_worker_threads</em>, <em>do_work</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.create_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a queue and a number of worker threads on it.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.create_worker_on_queue">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">create_worker_on_queue</tt><big>(</big><em>q</em>, <em>do_work</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.create_worker_on_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a worker function that takes tasks off a queue.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.do_task">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">do_task</tt><big>(</big><em>fn</em>, <em>args_filename</em>, <em>result_filename</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.do_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Actually do the task.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.log_exception">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">log_exception</tt><big>(</big><em>exc_type</em>, <em>exc_obj</em>, <em>exc_tb</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.log_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an exception. Can be used as replacement for sys.excepthook.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.run_as_subprocess">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">run_as_subprocess</tt><big>(</big><em>module_name</em>, <em>function_name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.run_as_subprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the named function as a subprocess.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.function_as_task.sleep">
<tt class="descclassname">cookbook.function_as_task.</tt><tt class="descname">sleep</tt><big>(</big><em>time_to_sleep</em><big>)</big><a class="headerlink" href="#cookbook.function_as_task.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to test run function as task functionality.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.groupby">
<span id="group-by"></span><h2>Group by<a class="headerlink" href="#module-cookbook.groupby" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://code.activestate.com/recipes/259173-groupby/">http://code.activestate.com/recipes/259173-groupby/</a>
Licensed under the PSF License</p>
</div>
<div class="section" id="module-cookbook.interval">
<span id="interval"></span><h2>Interval<a class="headerlink" href="#module-cookbook.interval" title="Permalink to this headline">¶</a></h2>
<p>Code to handle intervals.</p>
<dl class="class">
<dt id="cookbook.interval.Interval">
<em class="property">class </em><tt class="descclassname">cookbook.interval.</tt><tt class="descname">Interval</tt><big>(</big><em>start</em>, <em>end</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an interval.
Defined as half-open interval [start,end), which includes the start position but not the end.
Start and end do not have to be numeric types.</p>
<dl class="method">
<dt id="cookbook.interval.Interval.as_slice">
<tt class="descname">as_slice</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.as_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A slice object that the interval indexes.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.empty">
<tt class="descname">empty</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff self is empty.</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.interval.Interval.end">
<tt class="descname">end</tt><a class="headerlink" href="#cookbook.interval.Interval.end" title="Permalink to this definition">¶</a></dt>
<dd><p>The interval&#8217;s end</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.hull">
<tt class="descname">hull</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.hull" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: Interval containing both self and other.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.intersection">
<tt class="descname">intersection</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Intersection. &#64;return: An empty intersection if there is none.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.overlap">
<tt class="descname">overlap</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.overlap" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff self intersects other.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.proper_subset">
<tt class="descname">proper_subset</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.proper_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff self is proper subset of other.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.separation">
<tt class="descname">separation</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.separation" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The distance between self and other.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.singleton">
<tt class="descname">singleton</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.singleton" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff self.end - self.start == 1.</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.interval.Interval.start">
<tt class="descname">start</tt><a class="headerlink" href="#cookbook.interval.Interval.start" title="Permalink to this definition">¶</a></dt>
<dd><p>The interval&#8217;s start</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.subset">
<tt class="descname">subset</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff self is subset of other.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.interval.Interval.zero_in">
<tt class="descname">zero_in</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.interval.Interval.zero_in" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff 0 in self.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cookbook.lru_cache">
<span id="lru-cache"></span><h2>LRU cache<a class="headerlink" href="#module-cookbook.lru_cache" title="Permalink to this headline">¶</a></h2>
<p>One-line decorator call adds caching to functions with hashable arguments and no
keyword arguments. When the maximum size is reached, the least recently used
entry is discarded &#8211; appropriate for long-running processes which cannot allow
caches to grow without bound. Includes built-in performance instrumentation.</p>
<p>Adapted from <a class="reference external" href="http://code.activestate.com/recipes/498245-lru-and-lfu-cache-decorators/">http://code.activestate.com/recipes/498245-lru-and-lfu-cache-decorators/</a>
(released under PSF license).</p>
<dl class="function">
<dt id="cookbook.lru_cache.lru_cache">
<tt class="descclassname">cookbook.lru_cache.</tt><tt class="descname">lru_cache</tt><big>(</big><em>maxsize=0</em>, <em>cache_storage_file=None</em><big>)</big><a class="headerlink" href="#cookbook.lru_cache.lru_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator applying a least-recently-used cache with the given maximum size.</p>
<p>Arguments to the cached function must be hashable.
Cache performance statistics stored in f.hits and f.misses.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.named_tuple">
<span id="named-tuple"></span><h2>Named tuple<a class="headerlink" href="#module-cookbook.named_tuple" title="Permalink to this headline">¶</a></h2>
<p>From <a class="reference external" href="http://code.activestate.com/recipes/500261-named-tuples/">http://code.activestate.com/recipes/500261-named-tuples/</a>
Released under PSF license.</p>
</div>
<div class="section" id="module-cookbook.output_context">
<span id="output-context"></span><h2>Output context<a class="headerlink" href="#module-cookbook.output_context" title="Permalink to this headline">¶</a></h2>
<p>Code to implement output contexts.</p>
<dl class="class">
<dt id="cookbook.output_context.OutputContext">
<em class="property">class </em><tt class="descclassname">cookbook.output_context.</tt><tt class="descname">OutputContext</tt><a class="headerlink" href="#cookbook.output_context.OutputContext" title="Permalink to this definition">¶</a></dt>
<dd><p>An output context. Uses the Borg design pattern:
<a class="reference external" href="http://code.activestate.com/recipes/66531-singleton-we-dont-need-no-stinkin-singleton-the-bo/">http://code.activestate.com/recipes/66531-singleton-we-dont-need-no-stinkin-singleton-the-bo/</a></p>
<dl class="method">
<dt id="cookbook.output_context.OutputContext.cache_filename">
<tt class="descname">cache_filename</tt><big>(</big><em>object_name</em><big>)</big><a class="headerlink" href="#cookbook.output_context.OutputContext.cache_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A callable that returns a filename suitable for caching an object.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.output_context.OutputContext.caching_decorator">
<tt class="descname">caching_decorator</tt><big>(</big><em>name</em>, <em>dump_on_update=False</em><big>)</big><a class="headerlink" href="#cookbook.output_context.OutputContext.caching_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A decorator that caches the results of methods.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.output_context.OutputContext.setUp">
<tt class="descname">setUp</tt><big>(</big><em>root_dir</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#cookbook.output_context.OutputContext.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the output context, i.e. tell it where any output should go.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cookbook.output_context.ensure_dir_exists">
<tt class="descclassname">cookbook.output_context.</tt><tt class="descname">ensure_dir_exists</tt><big>(</big><em>dir</em><big>)</big><a class="headerlink" href="#cookbook.output_context.ensure_dir_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the given directory exists.</p>
</dd></dl>

<dl class="data">
<dt id="cookbook.output_context.output_context">
<tt class="descclassname">cookbook.output_context.</tt><tt class="descname">output_context</tt><em class="property"> = &lt;cookbook.output_context.OutputContext object at 0x30a9c90&gt;</em><a class="headerlink" href="#cookbook.output_context.output_context" title="Permalink to this definition">¶</a></dt>
<dd><p>An object we can use to access the output context.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.permutation">
<span id="permutation"></span><h2>Permutation<a class="headerlink" href="#module-cookbook.permutation" title="Permalink to this headline">¶</a></h2>
<p>Code to handle permutations and their inverses.</p>
<dl class="function">
<dt id="cookbook.permutation.chain_permutations">
<tt class="descclassname">cookbook.permutation.</tt><tt class="descname">chain_permutations</tt><big>(</big><em>permutation1</em>, <em>permutation2</em><big>)</big><a class="headerlink" href="#cookbook.permutation.chain_permutations" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A permutation that consists of the 2 permutations chained together.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.permutation.identity_permutation">
<tt class="descclassname">cookbook.permutation.</tt><tt class="descname">identity_permutation</tt><big>(</big><em>size</em><big>)</big><a class="headerlink" href="#cookbook.permutation.identity_permutation" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The identity permutation.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.permutation.invert_permutation">
<tt class="descclassname">cookbook.permutation.</tt><tt class="descname">invert_permutation</tt><big>(</big><em>permutation</em><big>)</big><a class="headerlink" href="#cookbook.permutation.invert_permutation" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The inversion of the permutation.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.permutation.permute">
<tt class="descclassname">cookbook.permutation.</tt><tt class="descname">permute</tt><big>(</big><em>x</em>, <em>permutation</em><big>)</big><a class="headerlink" href="#cookbook.permutation.permute" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A list that is the permuted version of x.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.permutation.permute_yield">
<tt class="descclassname">cookbook.permutation.</tt><tt class="descname">permute_yield</tt><big>(</big><em>x</em>, <em>permutation</em><big>)</big><a class="headerlink" href="#cookbook.permutation.permute_yield" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator that yields a permuted version of x.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.persisted_cache">
<span id="persisted-cache"></span><h2>Persisted cache<a class="headerlink" href="#module-cookbook.persisted_cache" title="Permalink to this headline">¶</a></h2>
<p>Code for lazy cached initialisation.</p>
<dl class="class">
<dt id="cookbook.persisted_cache.Cache">
<em class="property">class </em><tt class="descclassname">cookbook.persisted_cache.</tt><tt class="descname">Cache</tt><big>(</big><em>initialiser</em><big>)</big><a class="headerlink" href="#cookbook.persisted_cache.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Caches the result of calling a function. The function is evaluated once on the
first invocation of self() and the cached result is returned for every
invocation thereafter.</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.persisted_cache.PersistedCache">
<em class="property">class </em><tt class="descclassname">cookbook.persisted_cache.</tt><tt class="descname">PersistedCache</tt><big>(</big><em>initialiser</em>, <em>pickle_file</em><big>)</big><a class="headerlink" href="#cookbook.persisted_cache.PersistedCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Caches the result of calling a function. The function is evaluated once on the
first invocation of self() and the cached result is returned for every
invocation thereafter. The persist method stores the cached result in the
given file. This pickled object is reused in preference to function
invocation the next time the object is loaded.</p>
<dl class="method">
<dt id="cookbook.persisted_cache.PersistedCache.persist">
<tt class="descname">persist</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.persisted_cache.PersistedCache.persist" title="Permalink to this definition">¶</a></dt>
<dd><p>Pickle object to disk</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cookbook.persisted_cache.persist_all_in">
<tt class="descclassname">cookbook.persisted_cache.</tt><tt class="descname">persist_all_in</tt><big>(</big><em>variables</em><big>)</big><a class="headerlink" href="#cookbook.persisted_cache.persist_all_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Persist all the PersistedCaches in the given set of variables. E.g. persist_all_in(vars().values())</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.pre_post_conditions">
<span id="pre-post-conditions"></span><h2>Pre/post conditions<a class="headerlink" href="#module-cookbook.pre_post_conditions" title="Permalink to this headline">¶</a></h2>
<p>From <a class="reference external" href="http://wiki.python.org/moin/PythonDecoratorLibrary">http://wiki.python.org/moin/PythonDecoratorLibrary</a></p>
<p>Provide pre-/postconditions as function decorators.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">in_ge20</span><span class="p">(</span><span class="n">inval</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">assert</span> <span class="n">inval</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">,</span> <span class="s">&#39;Input value &lt; 20&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">out_lt30</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="n">inval</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">assert</span> <span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">,</span> <span class="s">&#39;Return value &gt;= 30&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@precondition</span><span class="p">(</span><span class="n">in_ge20</span><span class="p">)</span>
<span class="gp">... </span><span class="nd">@postcondition</span><span class="p">(</span><span class="n">out_lt30</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">inc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inc</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">AssertionError</span>: <span class="n">Input value &lt; 20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inc</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">AssertionError</span>: <span class="n">Return value &gt;= 30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inc</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="go">21</span>
</pre></div>
</div>
<p>You can define as many pre-/postconditions for a function as you
like. It is also possible to specify both types of conditions at once:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@conditions</span><span class="p">(</span><span class="n">in_ge20</span><span class="p">,</span> <span class="n">out_lt30</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add1</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add1</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">AssertionError</span>: <span class="n">Input value &lt; 20</span>
</pre></div>
</div>
<p>An interesting feature is the ability to prevent the creation of
pre-/postconditions at function definition time. This makes it
possible to use conditions for debugging and then switch them off for
distribution.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">debug</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@precondition</span><span class="p">(</span><span class="n">in_ge20</span><span class="p">,</span> <span class="n">debug</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">dec</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">value</span> <span class="o">-</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
</div>
<div class="section" id="module-cookbook.progress">
<span id="progress"></span><h2>Progress<a class="headerlink" href="#module-cookbook.progress" title="Permalink to this headline">¶</a></h2>
<p>From: <a class="reference external" href="http://code.activestate.com/recipes/473899-progress-meter/">http://code.activestate.com/recipes/473899-progress-meter/</a>
Licensed under the PSF License</p>
<p>Here is a silly example of its usage:</p>
<p>import progress
import time
import random</p>
<p>total = 1000
p = progress.ProgressMeter(total=total)</p>
<dl class="docutils">
<dt>while total &gt; 0:</dt>
<dd>cnt = random.randint(1, 25)
p.update(cnt)
total -= cnt
time.sleep(random.random())</dd>
</dl>
<p>Here is an example of its output:</p>
<p>[&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-&gt;                                   ] 41%  821.2/sec</p>
<p>2006-02-20 Denis Barmenkov: ANSI codes replaced by Backspace (0x08) characters</p>
</div>
<div class="section" id="module-cookbook.pylab_utils">
<span id="pylab-utilities"></span><h2>Pylab utilities<a class="headerlink" href="#module-cookbook.pylab_utils" title="Permalink to this headline">¶</a></h2>
<p>Some utilities to use with matplotlib.</p>
<dl class="function">
<dt id="cookbook.pylab_utils.create_format_cycler">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">create_format_cycler</tt><big>(</big><em>**formats</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.create_format_cycler" title="Permalink to this definition">¶</a></dt>
<dd><p>Cycle through various format strings so that many different data can be displayed together.</p>
<p>If specifying many formats it is best to make them relatively prime to ensure the largest total cycle length.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pylab_utils.get_fig_size_for_latex">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">get_fig_size_for_latex</tt><big>(</big><em>fig_width_pt=345.0</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.get_fig_size_for_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Get fig_width_pt from LaTeX using showthecolumnwidth</p>
<p>&#64;return: figure size tuple if fig_width_pt was specified</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pylab_utils.layout_sub_plot">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">layout_sub_plot</tt><big>(</big><em>num_sub_plots</em>, <em>num_rows=0</em>, <em>num_cols=0</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.layout_sub_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify either num_rows or num_cols.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pylab_utils.pylab_context_ioff">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">pylab_context_ioff</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.pylab_context_ioff" title="Permalink to this definition">¶</a></dt>
<dd><p>A way of turning off pylab&#8217;s interactive mode with a &#8216;with&#8217; statement. For example
you could do:</p>
<blockquote>
<div>with pylab_context_ioff():
... pylab.figure()</div></blockquote>
<p>to ensure the figure was created in non-interactive mode. After the context has ended,
pylab&#8217;s interactive status is returned to what it was before the context was entered.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pylab_utils.pylab_ioff">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">pylab_ioff</tt><big>(</big><em>fn</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.pylab_ioff" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that turns pylab interactive mode off for duration of call to decorated function.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pylab_utils.set_rcParams_for_latex">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">set_rcParams_for_latex</tt><big>(</big><em>fig_width_pt=None</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.set_rcParams_for_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the rcParams in matplotlib to use postscript output.</p>
<p>If fig_width_pt is given then set default figure size to match.</p>
</dd></dl>

<dl class="data">
<dt id="cookbook.pylab_utils.simple_colours">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">simple_colours</tt><em class="property"> = ['b', 'g', 'r', 'c', 'm', 'y', 'k']</em><a class="headerlink" href="#cookbook.pylab_utils.simple_colours" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic pylab colours.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pylab_utils.violin_plot">
<tt class="descclassname">cookbook.pylab_utils.</tt><tt class="descname">violin_plot</tt><big>(</big><em>ax</em>, <em>data</em>, <em>pos</em>, <em>bp=False</em>, <em>facecolor='y'</em>, <em>alpha=0.3</em><big>)</big><a class="headerlink" href="#cookbook.pylab_utils.violin_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>create violin plots on an axis</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.pytables_utils">
<span id="pytables-utilities"></span><h2>Pytables utilities<a class="headerlink" href="#module-cookbook.pytables_utils" title="Permalink to this headline">¶</a></h2>
<p>Code to ease using pytables.</p>
<dl class="function">
<dt id="cookbook.pytables_utils.add_to_table">
<tt class="descclassname">cookbook.pytables_utils.</tt><tt class="descname">add_to_table</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#cookbook.pytables_utils.add_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A decorator that adds arguments and the result of the function to the table.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.pytables_utils.cache_in_table">
<tt class="descclassname">cookbook.pytables_utils.</tt><tt class="descname">cache_in_table</tt><big>(</big><em>table</em>, <em>*arg_names</em><big>)</big><a class="headerlink" href="#cookbook.pytables_utils.cache_in_table" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A decorator that caches the arguments and the result of the function in the table.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.rb_interval_tree">
<span id="red-black-interval-tree"></span><h2>Red-black interval tree<a class="headerlink" href="#module-cookbook.rb_interval_tree" title="Permalink to this headline">¶</a></h2>
<p>An augmented red-black tree that handles intervals.</p>
<dl class="class">
<dt id="cookbook.rb_interval_tree.rbintervalnode">
<em class="property">class </em><tt class="descclassname">cookbook.rb_interval_tree.</tt><tt class="descname">rbintervalnode</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervalnode" title="Permalink to this definition">¶</a></dt>
<dd><p>A node of a red black tree of half-open intervals.</p>
<dl class="attribute">
<dt id="cookbook.rb_interval_tree.rbintervalnode.max">
<tt class="descname">max</tt><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervalnode.max" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum value of any endpoint in the subtree rooted at this node.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rb_interval_tree.rbintervalnode.subtree_interval">
<tt class="descname">subtree_interval</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervalnode.subtree_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: An interval that the subtree rooted here spans.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cookbook.rb_interval_tree.rbintervaltree">
<em class="property">class </em><tt class="descclassname">cookbook.rb_interval_tree.</tt><tt class="descname">rbintervaltree</tt><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervaltree" title="Permalink to this definition">¶</a></dt>
<dd><p>A red black tree of half-open intervals. See Cormen, Leiserson, Rivest, Stein 2nd edition pg 311.</p>
<dl class="method">
<dt id="cookbook.rb_interval_tree.rbintervaltree.check_invariants">
<tt class="descname">check_invariants</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervaltree.check_invariants" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the max invariant of the nodes and the red-black properties.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rb_interval_tree.rbintervaltree.find_closest_intervals">
<tt class="descname">find_closest_intervals</tt><big>(</big><em>interval</em>, <em>max_distance=None</em><big>)</big><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervaltree.find_closest_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The closest intervals in the interval tree to the given interval.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rb_interval_tree.rbintervaltree.interval_search">
<tt class="descname">interval_search</tt><big>(</big><em>i</em><big>)</big><a class="headerlink" href="#cookbook.rb_interval_tree.rbintervaltree.interval_search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for a node whose interval overlaps i.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cookbook.rbtree">
<span id="red-black-tree"></span><h2>Red-black tree<a class="headerlink" href="#module-cookbook.rbtree" title="Permalink to this headline">¶</a></h2>
<p>A red-black tree implementation.</p>
<dl class="class">
<dt id="cookbook.rbtree.rbnode">
<em class="property">class </em><tt class="descclassname">cookbook.rbtree.</tt><tt class="descname">rbnode</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbnode" title="Permalink to this definition">¶</a></dt>
<dd><p>A node in a red black tree. See Cormen, Leiserson, Rivest, Stein 2nd edition pg 273.</p>
<dl class="attribute">
<dt id="cookbook.rbtree.rbnode.key">
<tt class="descname">key</tt><a class="headerlink" href="#cookbook.rbtree.rbnode.key" title="Permalink to this definition">¶</a></dt>
<dd><p>The node&#8217;s key</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.rbtree.rbnode.left">
<tt class="descname">left</tt><a class="headerlink" href="#cookbook.rbtree.rbnode.left" title="Permalink to this definition">¶</a></dt>
<dd><p>The node&#8217;s left child</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.rbtree.rbnode.p">
<tt class="descname">p</tt><a class="headerlink" href="#cookbook.rbtree.rbnode.p" title="Permalink to this definition">¶</a></dt>
<dd><p>The node&#8217;s parent</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.rbtree.rbnode.red">
<tt class="descname">red</tt><a class="headerlink" href="#cookbook.rbtree.rbnode.red" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the node red?</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.rbtree.rbnode.right">
<tt class="descname">right</tt><a class="headerlink" href="#cookbook.rbtree.rbnode.right" title="Permalink to this definition">¶</a></dt>
<dd><p>The node&#8217;s right child</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cookbook.rbtree.rbtree">
<em class="property">class </em><tt class="descclassname">cookbook.rbtree.</tt><tt class="descname">rbtree</tt><big>(</big><em>create_node=&lt;class 'cookbook.rbtree.rbnode'&gt;</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree" title="Permalink to this definition">¶</a></dt>
<dd><p>A red black tree. See Cormen, Leiserson, Rivest, Stein 2nd edition pg 273.</p>
<dl class="method">
<dt id="cookbook.rbtree.rbtree.check_invariants">
<tt class="descname">check_invariants</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree.check_invariants" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: True iff satisfies all criteria to be red-black tree.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rbtree.rbtree.insert_key">
<tt class="descname">insert_key</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree.insert_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert the key into the tree.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rbtree.rbtree.insert_node">
<tt class="descname">insert_node</tt><big>(</big><em>z</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree.insert_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert node z into the tree.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rbtree.rbtree.maximum">
<tt class="descname">maximum</tt><big>(</big><em>x=None</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree.maximum" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The maximum value in the subtree rooted at x.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rbtree.rbtree.minimum">
<tt class="descname">minimum</tt><big>(</big><em>x=None</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree.minimum" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The minimum value in the subtree rooted at x.</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.rbtree.rbtree.nil">
<tt class="descname">nil</tt><a class="headerlink" href="#cookbook.rbtree.rbtree.nil" title="Permalink to this definition">¶</a></dt>
<dd><p>The tree&#8217;s nil node</p>
</dd></dl>

<dl class="attribute">
<dt id="cookbook.rbtree.rbtree.root">
<tt class="descname">root</tt><a class="headerlink" href="#cookbook.rbtree.rbtree.root" title="Permalink to this definition">¶</a></dt>
<dd><p>The tree&#8217;s root node</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.rbtree.rbtree.search">
<tt class="descname">search</tt><big>(</big><em>key</em>, <em>x=None</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.rbtree.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the subtree rooted at x (or the root if not given) iteratively for the key.</p>
<p>&#64;return: self.nil if it cannot find it.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cookbook.rbtree.test_tree">
<tt class="descclassname">cookbook.rbtree.</tt><tt class="descname">test_tree</tt><big>(</big><em>t</em>, <em>keys</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.test_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert keys one by one checking invariants and membership as we go.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.rbtree.write_tree_as_dot">
<tt class="descclassname">cookbook.rbtree.</tt><tt class="descname">write_tree_as_dot</tt><big>(</big><em>t</em>, <em>f</em>, <em>show_nil=False</em><big>)</big><a class="headerlink" href="#cookbook.rbtree.write_tree_as_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the tree in the dot language format to f.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.reverse_dict">
<span id="reverse-dict"></span><h2>Reverse dict<a class="headerlink" href="#module-cookbook.reverse_dict" title="Permalink to this headline">¶</a></h2>
<p>From <a class="reference external" href="http://code.activestate.com/recipes/415903-two-dict-classes-which-can-lookup-keys-by-value-an/">http://code.activestate.com/recipes/415903-two-dict-classes-which-can-lookup-keys-by-value-an/</a>
Released under PSF license</p>
<dl class="class">
<dt id="cookbook.reverse_dict.LookupDict">
<em class="property">class </em><tt class="descclassname">cookbook.reverse_dict.</tt><tt class="descname">LookupDict</tt><big>(</big><em>*args</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#cookbook.reverse_dict.LookupDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary which can lookup values by key, and keys by value.
The lookup method returns a list of keys with matching values
to the value argument.</p>
</dd></dl>

<dl class="class">
<dt id="cookbook.reverse_dict.ReverseDict">
<em class="property">class </em><tt class="descclassname">cookbook.reverse_dict.</tt><tt class="descname">ReverseDict</tt><big>(</big><em>*args</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#cookbook.reverse_dict.ReverseDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary which can lookup values by key, and keys by value.
All values and keys must be hashable, and unique.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.script_basics">
<span id="script-utilities"></span><h2>Script utilities<a class="headerlink" href="#module-cookbook.script_basics" title="Permalink to this headline">¶</a></h2>
<p>Code to simplify logging and options in scripts.</p>
<dl class="function">
<dt id="cookbook.script_basics.boost_python_dlopen_flags">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">boost_python_dlopen_flags</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#cookbook.script_basics.boost_python_dlopen_flags" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that temporarily sets the dlopen flags for loading
multiple boost.python modules and then returns them to previous values.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.script_basics.log_exception">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">log_exception</tt><big>(</big><em>exc_type</em>, <em>exc_obj</em>, <em>exc_tb</em><big>)</big><a class="headerlink" href="#cookbook.script_basics.log_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an exception. Used as replacement for sys.excepthook.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.script_basics.log_options">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">log_options</tt><big>(</big><em>option_parser</em>, <em>options</em><big>)</big><a class="headerlink" href="#cookbook.script_basics.log_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the values of the options.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.script_basics.prepend_to_environment_variable">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">prepend_to_environment_variable</tt><big>(</big><em>var_name</em>, <em>value</em><big>)</big><a class="headerlink" href="#cookbook.script_basics.prepend_to_environment_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepend a value to colon separated list in the named environment variable.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.script_basics.preserve_dlopenflags">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">preserve_dlopenflags</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#cookbook.script_basics.preserve_dlopenflags" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that temporarily sets the dlopen flags and then
returns them to previous values.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.script_basics.setup_logging">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">setup_logging</tt><big>(</big><em>filename=None</em>, <em>level=20</em>, <em>log_command_line=True</em><big>)</big><a class="headerlink" href="#cookbook.script_basics.setup_logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up logging.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.script_basics.show_environment">
<tt class="descclassname">cookbook.script_basics.</tt><tt class="descname">show_environment</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.script_basics.show_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Print some details about the environment python is running in.</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.simple_logging">
<span id="logging-utilities"></span><h2>Logging utilities<a class="headerlink" href="#module-cookbook.simple_logging" title="Permalink to this headline">¶</a></h2>
<p>Utility functions for simple logging operations.</p>
<dl class="function">
<dt id="cookbook.simple_logging.add_file_handler">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">add_file_handler</tt><big>(</big><em>filename</em>, <em>logger=None</em>, <em>handlerType=&lt;class 'logging.FileHandler'&gt;</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.add_file_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a file handler to the logger if it does not already exist. 
If no logger is given, defaults to root logger. Returns the handler if one is
created.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.add_logging_to_file">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">add_logging_to_file</tt><big>(</big><em>filename</em>, <em>mode='w'</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.add_logging_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Add logging to named file.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.basic_config">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">basic_config</tt><big>(</big><em>level=20</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.basic_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up simple logging to stderr.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.create_log_exceptions_decorator">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">create_log_exceptions_decorator</tt><big>(</big><em>level=40</em>, <em>log_traceback=True</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.create_log_exceptions_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: Decorator to log exceptions raised inside a function.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.log_exception">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">log_exception</tt><big>(</big><em>level=40</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.log_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the current exception.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.log_exception_traceback">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">log_exception_traceback</tt><big>(</big><em>level=40</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.log_exception_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the traceback for the current exception.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.log_to_file_and_stderr">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">log_to_file_and_stderr</tt><big>(</big><em>filename</em>, <em>level=20</em>, <em>mode='w'</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.log_to_file_and_stderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up simple logging to named file.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.simple_logging.use_handler">
<tt class="descclassname">cookbook.simple_logging.</tt><tt class="descname">use_handler</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#cookbook.simple_logging.use_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that can be used to temporarily add a handler to a logger.</p>
<p>Typical usage:</p>
<blockquote>
<div><p>from cookbook.simple_logging import use_handler
from logging import getLogger, FileHandler, Formatter</p>
<dl class="docutils">
<dt>with use_handler(getLogger(), FileHandler(&#8216;output.log&#8217;)) as handler:</dt>
<dd>handler.setFormatter(Formatter(&#8220;%(asctime)s:%(levelname)s: %(message)s&#8221;))
&lt;do some stuff&gt;</dd>
</dl>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-cookbook.timer">
<span id="timer"></span><h2>Timer<a class="headerlink" href="#module-cookbook.timer" title="Permalink to this headline">¶</a></h2>
<p>Code to time things.</p>
<dl class="class">
<dt id="cookbook.timer.SimpleTimer">
<em class="property">class </em><tt class="descclassname">cookbook.timer.</tt><tt class="descname">SimpleTimer</tt><a class="headerlink" href="#cookbook.timer.SimpleTimer" title="Permalink to this definition">¶</a></dt>
<dd><p>Times things.</p>
<dl class="method">
<dt id="cookbook.timer.SimpleTimer.duration">
<tt class="descname">duration</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.timer.SimpleTimer.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: The duration since start.</p>
</dd></dl>

<dl class="method">
<dt id="cookbook.timer.SimpleTimer.restart">
<tt class="descname">restart</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.timer.SimpleTimer.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts the timer.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cookbook.timer.Timer">
<em class="property">class </em><tt class="descclassname">cookbook.timer.</tt><tt class="descname">Timer</tt><big>(</big><em>msg=None</em>, <em>level=20</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#cookbook.timer.Timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Times things and implements the context management protocol (see PEP 343).
A typical use case would be:</p>
<blockquote>
<div><p>from cookbook.timer import Timer</p>
<dl class="docutils">
<dt>with Timer(msg=&#8217;description of task&#8217;, level=logging.INFO, logger=getLogger(__name__)) as timer:</dt>
<dd>&lt;do some stuff&gt;</dd>
</dl>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-cookbook.venn">
<span id="venn"></span><h2>Venn<a class="headerlink" href="#module-cookbook.venn" title="Permalink to this headline">¶</a></h2>
<p>Creates Venn diagrams from up to 4 sets.</p>
<dl class="function">
<dt id="cookbook.venn.calc_areas">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">calc_areas</tt><big>(</big><em>bounds</em><big>)</big><a class="headerlink" href="#cookbook.venn.calc_areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the areas given by these bounds.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.calc_error">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">calc_error</tt><big>(</big><em>areas</em>, <em>sizes</em><big>)</big><a class="headerlink" href="#cookbook.venn.calc_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the error associated with these areas.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.calc_grid_areas">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">calc_grid_areas</tt><big>(</big><em>xs</em>, <em>ys</em><big>)</big><a class="headerlink" href="#cookbook.venn.calc_grid_areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the areas given by the grid bounds.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.calc_separation">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">calc_separation</tt><big>(</big><em>bounds</em><big>)</big><a class="headerlink" href="#cookbook.venn.calc_separation" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A separation value. The closer to 0 it is, the better the bounds will be separated.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.calc_squareness">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">calc_squareness</tt><big>(</big><em>bounds</em><big>)</big><a class="headerlink" href="#cookbook.venn.calc_squareness" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A square-ness value. The closer to 0 it is, the more square the bounds will be.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.create_svg">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">create_svg</tt><big>(</big><em>bounds</em>, <em>sizes=None</em>, <em>labels=None</em>, <em>scale=120</em>, <em>font_size=50</em><big>)</big><a class="headerlink" href="#cookbook.venn.create_svg" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SVG figure from the bounds.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.find_bounds">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">find_bounds</tt><big>(</big><em>sizes</em><big>)</big><a class="headerlink" href="#cookbook.venn.find_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Use an optimizer to find the bounds.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.fit_venn4">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">fit_venn4</tt><big>(</big><em>sets</em><big>)</big><a class="headerlink" href="#cookbook.venn.fit_venn4" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a Venn diagram to the 4 sets.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.initial_bounds">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">initial_bounds</tt><big>(</big><big>)</big><a class="headerlink" href="#cookbook.venn.initial_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a suitable set of initial bounds.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.venn.mid_points">
<tt class="descclassname">cookbook.venn.</tt><tt class="descname">mid_points</tt><big>(</big><em>xs</em><big>)</big><a class="headerlink" href="#cookbook.venn.mid_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mid_points</p>
</dd></dl>

</div>
<div class="section" id="module-cookbook.workflow">
<span id="workflow"></span><h2>Workflow<a class="headerlink" href="#module-cookbook.workflow" title="Permalink to this headline">¶</a></h2>
<p>Code to set up logging and options in a workflow</p>
<dl class="function">
<dt id="cookbook.workflow.caching_decorator">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">caching_decorator</tt><big>(</big><em>cache_name</em><big>)</big><a class="headerlink" href="#cookbook.workflow.caching_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: A decorator that caches the results of the function.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.workflow.ensure_dir_exists">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">ensure_dir_exists</tt><big>(</big><em>directory</em><big>)</big><a class="headerlink" href="#cookbook.workflow.ensure_dir_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a directory if it does not already exist.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.workflow.initialise_workflow">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">initialise_workflow</tt><big>(</big><em>options</em><big>)</big><a class="headerlink" href="#cookbook.workflow.initialise_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise the workflow:</p>
<ul class="simple">
<li>initialise basic logging</li>
<li>over-ride options with any defined in options.output_dir/options.py</li>
<li>set up logging to file in options.output_dir</li>
<li>log option values</li>
<li>set up a cache directory to store cached output</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="cookbook.workflow.log_attributes">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">log_attributes</tt><big>(</big><em>module</em><big>)</big><a class="headerlink" href="#cookbook.workflow.log_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the attributes in a module.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.workflow.logger_has_file_handler">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">logger_has_file_handler</tt><big>(</big><em>logger</em><big>)</big><a class="headerlink" href="#cookbook.workflow.logger_has_file_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: Does the logger have a file handler already?</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.workflow.output_cached_method">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">output_cached_method</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#cookbook.workflow.output_cached_method" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;return: Decorator that stores output of methods in cache directory.</p>
</dd></dl>

<dl class="function">
<dt id="cookbook.workflow.output_file">
<tt class="descclassname">cookbook.workflow.</tt><tt class="descname">output_file</tt><big>(</big><em>options</em>, <em>filename</em><big>)</big><a class="headerlink" href="#cookbook.workflow.output_file" title="Permalink to this definition">¶</a></dt>
<dd><p>A path to the given filename in the output directory.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Cookbook package</a><ul>
<li><a class="reference internal" href="#cookbook">Cookbook</a><ul>
<li><a class="reference internal" href="#some-python-recipes-from-the-python-cookbook">Some python recipes from the python cookbook</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-cookbook.bidirectional_map">Bidirectional map</a></li>
<li><a class="reference internal" href="#module-cookbook.bunch">Bunch</a></li>
<li><a class="reference internal" href="#module-cookbook.cache_decorator">Cache decorator</a></li>
<li><a class="reference internal" href="#module-cookbook.console">Console</a></li>
<li><a class="reference internal" href="#module-cookbook.const">Const</a></li>
<li><a class="reference internal" href="#module-cookbook.decorate">Decorate</a></li>
<li><a class="reference internal" href="#module-cookbook.dicts">Dicts</a></li>
<li><a class="reference internal" href="#module-cookbook.enum">Enum</a></li>
<li><a class="reference internal" href="#module-cookbook.equivalence">Equivalence</a></li>
<li><a class="reference internal" href="#module-cookbook.function_as_task">Function as task</a></li>
<li><a class="reference internal" href="#module-cookbook.groupby">Group by</a></li>
<li><a class="reference internal" href="#module-cookbook.interval">Interval</a></li>
<li><a class="reference internal" href="#module-cookbook.lru_cache">LRU cache</a></li>
<li><a class="reference internal" href="#module-cookbook.named_tuple">Named tuple</a></li>
<li><a class="reference internal" href="#module-cookbook.output_context">Output context</a></li>
<li><a class="reference internal" href="#module-cookbook.permutation">Permutation</a></li>
<li><a class="reference internal" href="#module-cookbook.persisted_cache">Persisted cache</a></li>
<li><a class="reference internal" href="#module-cookbook.pre_post_conditions">Pre/post conditions</a></li>
<li><a class="reference internal" href="#module-cookbook.progress">Progress</a></li>
<li><a class="reference internal" href="#module-cookbook.pylab_utils">Pylab utilities</a></li>
<li><a class="reference internal" href="#module-cookbook.pytables_utils">Pytables utilities</a></li>
<li><a class="reference internal" href="#module-cookbook.rb_interval_tree">Red-black interval tree</a></li>
<li><a class="reference internal" href="#module-cookbook.rbtree">Red-black tree</a></li>
<li><a class="reference internal" href="#module-cookbook.reverse_dict">Reverse dict</a></li>
<li><a class="reference internal" href="#module-cookbook.script_basics">Script utilities</a></li>
<li><a class="reference internal" href="#module-cookbook.simple_logging">Logging utilities</a></li>
<li><a class="reference internal" href="#module-cookbook.timer">Timer</a></li>
<li><a class="reference internal" href="#module-cookbook.venn">Venn</a></li>
<li><a class="reference internal" href="#module-cookbook.workflow">Workflow</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Cookbook</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/cookbook.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Cookbook"
             >previous</a> |</li>
        <li><a href="index.html">Cookbook 2.2.21 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, John Reid.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>